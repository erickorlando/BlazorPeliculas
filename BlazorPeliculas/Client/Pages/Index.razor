@page "/"


<PageTitle>Peliculas</PageTitle>

<h3>Peliculas</h3>
<ListadoPeliculas Peliculas="Peliculas" />

@code
{
    public List<Pelicula>? Peliculas { get; set; }

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
        if (firstRender)
            Peliculas = ObtenerPeliculas();
    }

    public List<Pelicula> ObtenerPeliculas()
    {
        Task.Delay(3000);

        var list = new List<Pelicula>
        {
            new() { Titulo = "Spiderman 2", FechaLanzamiento = DateTime.Parse("2004-11-30") },
            new() { Titulo = "Everything, everywhere, all at once", FechaLanzamiento = DateTime.Parse("2022-05-01") },
            new() { Titulo = "The Whale", FechaLanzamiento = DateTime.Parse("2023-02-10")},
            new() { Titulo = "Mario Bros. The Movie", FechaLanzamiento = DateTime.Parse("2023-04-05")}
        };
        return list;
    }
}
